<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MQueue Server Settings</title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<!-- Latest compiled and minified JavaScript -->

<link rel="stylesheet" href="http://cdn.datatables.net/1.10.0/css/jquery.dataTables.css">
<link rel="stylesheet" href="http://cdn.datatables.net/plug-ins/be7019ee387/integration/bootstrap/3/dataTables.bootstrap.css">
</head>
<body>

	<!-- Fixed navbar navbar-fixed-top -->
	<div class="navbar navbar-default " role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">MQueue Dispatcher</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li><a href="#">Home</a></li>
					<li class="active"><a href="#about">Server Settings</a></li>
					<li><a href="#about">MQueue Settings</a></li>
					<li><a href="#about">About</a></li>
					<li><a href="#contact">Contact</a></li>
					<!-- 
					<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="#">Action</a></li>
							<li><a href="#">Another action</a></li>
							<li><a href="#">Something else here</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Nav header</li>
							<li><a href="#">Separated link</a></li>
							<li><a href="#">One more separated link</a></li>
						</ul></li>
					 -->
				</ul>
				<ul class="nav navbar-nav navbar-right">
				<!-- 
					<li><a href="../navbar/">Default</a></li>
					<li><a href="../navbar-static-top/">Static top</a></li>
					<li class="active"><a href="./">Fixed top</a></li>
				 -->
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</div>

	<div class="container" id="tbl_container">
	</div>

	<textarea id="template_xslt" style="display: none"> 
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
	<xsl:template match="/">
<html>
<head>
</head>
<body>
		<table id="server_cfg_tbl">
			<thead>
				<tr>
					<th>host</th>
					<th>port</th>
					<th>user name</th>
					<th>password</th>
					<th>virtual host</th>
					<th>log file path</th>
					<th>max file size</th>
					<th></th>
				</tr>
			</thead>
			<xsl:for-each select="serverCfgs/serverCfg">
				<tr>
					<td>
						<xsl:value-of select="host" />
					</td>
					<td><xsl:value-of select="port" /></td>
					<td><xsl:value-of select="userName" /></td>
					<td><xsl:value-of select="password" /></td>
					<td><xsl:value-of select="virtualHost" /></td>
					<td><xsl:value-of select="logFilePath" /></td>
					<td><xsl:value-of select="maxFileSize" /></td>
					<td></td>
				</tr>
			</xsl:for-each>
			<tfoot>
				<tr>

				</tr>
			</tfoot>
		</table>
</body>
</html>
	</xsl:template>
</xsl:stylesheet>
	</textarea>

	<script type="text/javascript" src="../res/jquery-2.1.1.js"></script>
	<script type="text/javascript" src="../res/jquery.xslt.js"></script>
	
	<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="http://cdn.datatables.net/1.10.0/js/jquery.dataTables.js"></script>
	<script type="text/javascript" src="http://cdn.datatables.net/plug-ins/be7019ee387/integration/bootstrap/3/dataTables.bootstrap.js"></script>
	
	<script type="text/javascript" src="/dispatcher-0.0.1/rest/v1/ajax" id="ajax_metadata"></script>
	<script type="text/javascript" src="../res/rest.js"></script>
	
	<script type="text/javascript">
		//$(document).ready(loadData);

		function loadData() {

			var tx = $("#template_xslt")[0];
			var cd = $("#tbl_container");

			var xslt = tx.value.trim();
			var xhr = RS.ctx.ServerCfgRes.getAll.call().done(
					function(data, textStatus, jqXHR) {
						cd.xslt(xhr.responseText, xslt);
						$('#server_cfg_tbl').dataTable();
					});
		}
		
		loadData();
	</script>
</body>
</html>