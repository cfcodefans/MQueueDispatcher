<!DOCTYPE html>
<nav class="navbar navbar-default navbar-compact">
	<div class="navbar-header">
		<span class="navbar-brand">Queues</span>
	</div>
	<button type="button" class="btn btn-default navbar-btn" ng-click="create(this)">Create</button>
	<form class="navbar-form navbar-right" role="search">
		<div class="form-group">
			<input type="text" class="form-control" placeholder="Search" ng-model="filterValue" ng-change="filter()"/>
		</div>
	</form>
</nav>

	<script type="text/ng-template" id="queueCtrl">
		<div class="btn-group btn-group-justified" role="group">
			<a role="button" class="btn" ng-click="grid.appScope.edit(row.entity)">Edit</a>
  			<a role="button" class="btn" ng-click="grid.appScope.copy(row.entity)">Copy</a>
			<a role="button" class="btn">Stop</a>
		</div>
	</script>
	
	<script type="text/ng-template" id="queue_name">
		<a href="#/queue/{{row.entity.id}}">{{row.entity.name}}</a>
	</script>

<div id="queueTable" 
	ui-grid="gridCfgs" 
	ui-grid-auto-resize 
	ui-grid-pagination
	class="main-grid">
	<!-- 
	 -->
</div>


<script type="text/ng-template" id="queue_modal">
<form class="form-horizontal" role="form" id="edit_form">
	<div class="modal-content">
		<div class="modal-header">
			<!--button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button-->
			<h4 class="modal-title">Edit Queue</h4>
		</div>
		<div class="modal-body">
			<div class="input-group">
				<span class="input-group-addon" id="nameDesc">Name</span> 
				<input ng-model="qc.name" type="text" id="name" required="true" class="form-control" aria-describedby="nameDesc" />
				<span class="input-group-addon" id="queueNameDesc">Queue Name</span> 
				<input ng-model="qc.queueName" type="text" id="qname" required="true" class="form-control" aria-describedby="queueNameDesc" />
			</div>
			<div class="input-group">
				<span class="input-group-addon" id="serverDesc">Server</span> 
				<select 
					size="7"
					ng-options="serverCfg.label for serverCfg in serverCfgs track by serverCfg.id" 
					ng-model="selectedServerCfg" 
					ng-change="onServerCfgSelected(selectedServerCfg)"
					required="true" 
					class="form-control" 
					aria-describedby="serverDesc">
				</select>
			</div>
			<div class="input-group">
				<span class="input-group-addon" id="exDesc">Exchange</span> 
				<select multiple
					size="7"
					ng-options="ec as exchangeCfg.label for exchangeCfg in exchangeCfgs track by exchangeCfg.id" 
					ng-model="selectedExchanges" 
					required="true" 
					class="form-control" 
					aria-describedby="exDesc">
				</select>
			</div>
			<div class="input-group">
				<span class="input-group-addon" id="routeKeyDesc">Route Key</span> 
				<input ng-model="qc.routeKey" type="text" id="routeKey" required="false" class="form-control" aria-describedby="nameDesc" />
				<span class="input-group-addon" id="retryDesc">Retry</span> 
				<input ng-model="qc.retryLimit" type="number" id="retryLimit" required="true" class="form-control" aria-describedby="retryDesc" />
				<span class="input-group-addon" id="fetchDesc">Fetch Size</span> 
				<input ng-model="qc.prefetchSize" type="number" id="retryLimit" required="true" class="form-control" aria-describedby="fetchDesc" />
			</div>
			<div class="input-group">
				<span class="input-group-addon" id="optionsDesc">Options</span>
				<div class="form-control">
					<label class=""> 
						<input type="checkbox" id="exclusive" ng-model="qc.exclusive"> exclusive
					</label>
					<label class=""> 
						<input type="checkbox" id="durable" ng-model="qc.durable"> durable
					</label>  						
					<label class=""> 
						<input type="checkbox" id="autoDelete" ng-model="qc.autoDelete"> autoDelete
					</label>
				</div>
			</div>
			<div class="input-group">
				<span class="input-group-addon" id="urlDesc">URL</span> 
				<input ng-model="qc.destCfg.url" type="text" id="url" required="true" class="form-control" aria-describedby="urlDesc" />
			</div>
			<div class="input-group">
				<span class="input-group-addon" id="headerDesc">Host header</span> 
				<input ng-model="qc.destCfg.hostHead" type="text" id="url" required="true" class="form-control" aria-describedby="headerDesc" />
			</div>
			<div class="input-group">
				<span class="input-group-addon" id="methodDesc">Http method</span>
				<div class="form-control">
				<label class="">
					<input type="radio" ng-model="qc.destCfg.httpMethod" name="httpMethod" id="httpMethod_post" value="post"> post
				</label>
				<label class="">
					<input type="radio" ng-model="qc.destCfg.httpMethod" name="httpMethod" id="httpMethod_get" value="get"> get
				</label>
				</div>
				<span class="input-group-addon" id="timeoutDesc">Timeout</span>
				<input ng-model="qc.destCfg.timeout" type="number" id="timeout" required="true" class="form-control" aria-describedby="timeoutDesc" />
			</div>
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="modal" ng-click="cancel()">Close</button>
			<button type="button" class="btn btn-primary" ng-click="save(sc)">Save</button>
		</div>
	</div>
</form>
</script>